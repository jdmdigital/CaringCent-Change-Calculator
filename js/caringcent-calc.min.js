/* 
 * CaringCent Change Calculator JS - v0.4
 * Includes: animateNumber v 0.0.13, and jQuery Percentage
 */
 !function(e){var t=function(e){return e.split("").reverse().join("")},a={numberStep:function(t,a){var r=Math.floor(t);e(a.elem).text(r)}},r=function(e){var t=e.elem;t.nodeType&&t.parentNode&&(t=t._animateNumberSetter,t||(t=a.numberStep),t(e.now,e))};e.Tween&&e.Tween.propHooks?e.Tween.propHooks.number={set:r}:e.fx.step.number=r,e.animateNumber={numberStepFactories:{append:function(t){return function(a,r){var n=Math.floor(a);e(r.elem).prop("number",a).text(n+t)}},separator:function(a,r,n){return a=a||" ",r=r||3,n=n||"",function(u,o){var i=Math.floor(u).toString(),c=e(o.elem);if(i.length>r){for(var s,l,p,m=i,v=r,f=m.split("").reverse(),i=[],y=0,d=Math.ceil(m.length/v);d>y;y++){for(s="",p=0;v>p&&(l=y*v+p,l!==m.length);p++)s+=f[l];i.push(s)}m=i.length-1,v=t(i[m]),i[m]=t(parseInt(v,10).toString()),i=i.join(a),i=t(i)}c.prop("number",u).text(i+n)}}}},e.fn.animateNumber=function(){for(var t=arguments[0],r=e.extend({},a,t),n=e(this),u=[r],o=1,i=arguments.length;i>o;o++)u.push(arguments[o]);if(t.numberStep){var c=this.each(function(){this._animateNumberSetter=t.numberStep}),s=r.complete;r.complete=function(){c.each(function(){delete this._animateNumberSetter}),s&&s.apply(this,arguments)}}return n.animate.apply(n,u)}}(jQuery),!function(e){var t=function(e,t,a){return this.slice(0,e)+a+this.slice(t)};e.fn.percentage=function(a,r){return a===!0&&this.is("input:text")?this.on({"keydown.format":function(a){var n=e(this),u=a.keyCode?a.keyCode:a.which,o=this.selectionStart,i=this.selectionEnd,c=this.value.length,s=n.data("percentage")||{};if(!(46==u||9==u||27==u||13==u||(65==u||82==u)&&(a.ctrlKey||a.metaKey)===!0||(86==u||67==u)&&(a.ctrlKey||a.metaKey)===!0||u>=35&&39>=u)){if((48>u||u>57)&&(96>u||u>105)&&8!==u||a.shiftKey)return void a.preventDefault();if(e.isNumeric(r)){var l=t.call(n.val(),o,i,String.fromCharCode(a.keyCode));if(l>r)return void a.preventDefault()}return 8===a.keyCode?(o>=c&&a.preventDefault(),void(s.c=o===i?o-1:o)):""!==this.value&&o>=c?void a.preventDefault():(s.c=o+1,e(this).data("percentage",s),!0)}},"keyup.format":function(t){var a=e(this),r=t.keyCode?t.keyCode:t.which,n=a.data("percentage");""===this.value||(48>r||r>57)&&(96>r||r>105)&&8!==r||(a.val(a.val()),this.setSelectionRange(n.c,n.c))},"paste.format":function(t){var a=e(this),r=t.originalEvent,n=null;return window.clipboardData&&window.clipboardData.getData?n=window.clipboardData.getData("Text"):r.clipboardData&&r.clipboardData.getData&&(n=r.clipboardData.getData("text/plain")),n>2&&a.val(n),t.preventDefault(),!1}}).each(function(){e(this).data("percentage",{init:!0,max:r})}):this.text(e.percentage.apply(window,arguments))};var a,r;e.isPlainObject(e.valHooks.text)?(e.isFunction(e.valHooks.text.get)&&(a=e.valHooks.text.get),e.isFunction(e.valHooks.text.set)&&(r=e.valHooks.text.set)):e.valHooks.text={},e.valHooks.text.get=function(t){var r=e(t),n=r.data("percentage");return n?""===t.value?"":parseFloat(t.value).toString():e.isFunction(a)?a(t):void 0},e.valHooks.text.set=function(t,a){var n=e(t),u=n.data("percentage");return u?t.value=""===a?"":e.percentage(a,u.max):e.isFunction(r)?r(t,a):void 0},e.percentage=function(t,a){return e.isNumeric(t)||(t=0),e.isNumeric(a)&&t>a&&(t=0),t+"%"}}(jQuery);var calcObject={amountNull:"0.00",amountY1:"0.00",amountYn:"0.00",runcalc:function(){var e=parseFloat(jQuery("#existingdonors").val()),t=parseFloat(jQuery("#newdonors").val()),a=e+t,r=e+t/2,n=parseFloat(jQuery("#usageNum").val()),u=parseFloat(jQuery("#changepercardNum").val()),o=parseFloat(jQuery("#caringcentfeeNum").val()),i=parseFloat(jQuery("#processingfeeNum").val()),c=o+i,s=r*n*u*12*.55;calcObject.amountY1=parseFloat(s)-c*parseFloat(s);var l=a*n*u*12;calcObject.amountYn=parseFloat(l)-c*parseFloat(l);var p=jQuery.animateNumber.numberStepFactories.separator(",");jQuery("#yearonetotal span").animateNumber({number:calcObject.amountY1,numberStep:p}),jQuery("#futureyearstotal span").animateNumber({number:calcObject.amountYn,numberStep:p})}};jQuery(document).ready(function(){var e=jQuery.animateNumber.numberStepFactories.separator(","),t=parseFloat(jQuery("#yearonetotal0").val()),a=parseFloat(jQuery("#futureyears0").val());jQuery("#yearonetotal span").animateNumber({number:t,numberStep:e}),jQuery("#futureyearstotal span").animateNumber({number:a,numberStep:e}),jQuery("#changecalc form input").keydown(function(e){var t=e.charCode?e.charCode:e.keyCode?e.keyCode:0;if(13==t){e.preventDefault();var a=jQuery(this).closest("form").find(":input:not([disabled])");a.eq(a.index(this)+1).focus()}}),jQuery("#showassumptions").click(function(e){return e.preventDefault(),jQuery("#assumptions").toggle("fast"),"Show Assumptions"===jQuery.trim(jQuery(this).text())?jQuery(this).text("Hide Assumptions"):jQuery(this).text("Show Assumptions"),!1}),jQuery("#resetrecalc").click(function(e){e.preventDefault();var t=jQuery("#existingdonors0").val(),a=jQuery("#newdonors0").val(),r=jQuery("#usage0").val();jQuery("#existingdonors").val(t),jQuery("#newdonors").val(a),jQuery("#usage").val(r),calcObject.runcalc()}),jQuery("#usage").keyup(function(){var e=jQuery(this).val();e/=100,jQuery("#usageNum").val(e),calcObject.runcalc()}),jQuery("#usage").change(function(){var e=jQuery(this).val();e/=100,jQuery("#usageNum").val(e),calcObject.runcalc()}),jQuery("#existingdonors").keyup(function(){calcObject.runcalc()}),jQuery("#existingdonors").change(function(){calcObject.runcalc()}),jQuery("#newdonors").keyup(function(){calcObject.runcalc()}),jQuery("#newdonors").change(function(){calcObject.runcalc()})});